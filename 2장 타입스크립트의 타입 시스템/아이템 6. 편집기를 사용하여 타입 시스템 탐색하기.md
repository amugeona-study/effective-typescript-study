## 편집기를 사용하여 타입 시스템 탐색하기

타입스크립트를 설치하면, 다음 두 가지를 실행할 수 있다.
* 타입스크립트 컴파일러(`tsc`)
* 단독으로 실행할 수 있는 타입스크립트 서버(`tsserver`)

보통은 타입스크립트 컴파일러를 실행한다는 것이 주된 목적이지만, 타입스크립트 서버 또한 **언어 서비스**를 제공한다.  
언어 서비스는 코드 자동 완성, 명세 검사, 검색, 리팩터링이 포함된다. 보통은 편집기를 사용하여 언어 서비스를 사용하는데, 타입스크립트 서버에서 언어 서비스를 제공하도록 설정하는 것이 좋다.  
(참고: vscode에서 Typescript는 `tsserver` 를 통해 지원되고 있다.)  
[TSserver 참고 링크: TSserver 톺아보기](https://ironist-tapkim.tistory.com/11)  

편집기는 **타입스크립트가 언제 타입 추론을 수행할 수 있는지**에 대한 개념을 잡게 해주는데, 이 개념을 확실히 잡아야 간결하고 읽기 쉬운 코드를 작성할 수 있다. 보통의 경우에는 심벌 위에 마우스 커서를 대면 타입스크립트가 그 변수/함수의 타입을 어떻게 판단하고 있는지 확인할 수 있고, 이 타입이 기대한 것과 다르다면 타입 선언을 직접 명시하고, 문제가 발생하는 부분을 찾아봐야 한다.  

특정 시점에 타입스크립트가 값의 타입을 어떻게 이해하고 있는지 살펴보는 것은 **타입 넓히기**와 **좁히기**의 개념을 잡기 위해 꼭 필요한 과정이다.  
조건문의 분기에서 값의 타입이 어떻게 변하는지 살펴보고, 객체에서 개별 속성을 살펴보고, 연산자 체인 중간에 추론된 제너릭 타입을 살펴봄으로써 타입스크립트의 타입 추론을 살펴볼 수 있다.  
편집기 상의 타입 오류를 살펴보는 것도 타입 시스템의 성향을 파악하는 데 좋은 방법이다.

``` ts
function getElement(elOrId: string | HTMLElement | null): HTMLElement {
  if (typeof elOrId === 'object') {
    return elOrId;
    // ~~~ Type 'HTMLElement | null' is not assignable to type 'HTMLElement'
  } else if (elOrId === null) {
    return document.body;
  }
  elOrId
  // ^? (parameter) elOrId: string
  return document.getElementById(elOrId);
  // ~~~ Type 'HTMLElement | null' is not assignable to type 'HTMLElement'
}
```

위 코드에서 첫 번째 if 분기문의 의도는 `HTMLElement` 라는 객체를 골라내는 것이었지만, 타입스크립트에서 `typeof null` 은 `object` 이므로, `elOrId` 는 여전히 `null` 일 가능성이 있다. 그렇기에 처음에 `null` 체크를 추가해야 한다.  
두 번째 오류는 `document.getElementById` 가 `null` 을 반환할 가능성이 있어서 발생했기에, 마찬가지로 `null` 체크를 진행해야 한다.  

언어 서비스는 라이브러리와 라이브러리의 타입 선언을 탐색할 때 도움이 된다. 편집기의 `Go to Definition(정의로 이동)` 옵션을 통해 타입스크립트 타입 선언을 확인할 수 있고, 인자와 리턴값의 타입을 확인할 수 있다.

---
### 요약
* 편집기에서 타입스크립트 언어 서비스를 적극 활용해야 한다.
* 편집기를 사용하면 어떻게 타입 시스템이 동작하는지, 그리고 타입스크립트가 어떻게 타입을 추론하는지 개념을 잡을 수 있다.
* 타입스크립트가 동작을 어떻게 모델링하는지 알기 위해 타입 선언 파일을 찾아보는 방법을 터득해야 한다.